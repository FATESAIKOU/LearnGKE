# ToDo Application - Use Case 定義

## 1. 概要

本文件定義 ToDo Application 的使用者案例，作為開發的基本設計書。

### 1.1 系統概述
- **目的**: 提供一個簡單的待辦事項管理應用
- **使用者**: 單一使用者（無需登入）
- **平台**: Web Application

### 1.2 技術架構
```
                                    ┌─────────────────┐
                                    │                 │
                                    │    Frontend     │
                              ┌────►│   (Next.js)     │
                              │     │   Port: 3000    │
                              │     │                 │
┌─────────────┐    ┌─────────────┐  └─────────────────┘
│             │    │             │
│   Browser   │───►│    Nginx    │  ┌─────────────────┐     ┌─────────────────┐
│             │    │  Port: 80   │  │                 │     │                 │
└─────────────┘    │             │  │    Backend      │     │    Database     │
                   │  /api/* ────┼─►│ (Ruby on Rails) │────►│    (MySQL)      │
                   │  /* ────────┼─►│   Port: 3001    │     │   Port: 3306    │
                   │             │  │                 │     │                 │
                   └─────────────┘  └─────────────────┘     └─────────────────┘
```

### 1.3 Nginx 路由規則
| 路徑 | 轉發目標 | 說明 |
|------|----------|------|
| `/api/*` | Backend (Rails) | API 請求 |
| `/*` | Frontend (Next.js) | 前端頁面 |

---

## 2. Use Case 一覧

### UC-01: 查看待辦事項列表 (List ToDo)
| 項目 | 內容 |
|------|------|
| **Actor** | 使用者 |
| **前提條件** | 無 |
| **觸發事件** | 使用者訪問首頁 |
| **基本流程** | 1. 使用者進入應用首頁<br>2. 系統顯示所有待辦事項列表<br>3. 列表按建立時間降序排列 |
| **替代流程** | 若無待辦事項，顯示「目前沒有待辦事項」提示 |
| **後置條件** | 使用者看到待辦事項列表 |

### UC-02: 搜尋待辦事項 (Search ToDo)
| 項目 | 內容 |
|------|------|
| **Actor** | 使用者 |
| **前提條件** | 無 |
| **觸發事件** | 使用者輸入搜尋關鍵字 |
| **基本流程** | 1. 使用者在搜尋框輸入關鍵字<br>2. 系統根據標題進行模糊搜尋<br>3. 顯示符合條件的待辦事項 |
| **替代流程** | 若無符合條件的項目，顯示「找不到相關待辦事項」 |
| **後置條件** | 使用者看到搜尋結果 |

### UC-03: 查看待辦事項詳情 (Show ToDo)
| 項目 | 內容 |
|------|------|
| **Actor** | 使用者 |
| **前提條件** | 待辦事項存在 |
| **觸發事件** | 使用者點擊某個待辦事項 |
| **基本流程** | 1. 使用者點擊待辦事項標題<br>2. 系統顯示該待辦事項的詳細資訊 |
| **替代流程** | 若待辦事項不存在，顯示 404 錯誤頁面 |
| **後置條件** | 使用者看到待辦事項詳情 |

### UC-04: 新增待辦事項 (Create ToDo)
| 項目 | 內容 |
|------|------|
| **Actor** | 使用者 |
| **前提條件** | 無 |
| **觸發事件** | 使用者點擊「新增」按鈕 |
| **基本流程** | 1. 使用者點擊「新增待辦事項」按鈕<br>2. 系統顯示新增表單<br>3. 使用者填寫標題（必填）和描述（選填）<br>4. 使用者點擊「儲存」<br>5. 系統建立新待辦事項並返回列表頁 |
| **替代流程** | 若標題為空，顯示驗證錯誤訊息 |
| **後置條件** | 新待辦事項被建立 |

### UC-05: 編輯待辦事項 (Update ToDo)
| 項目 | 內容 |
|------|------|
| **Actor** | 使用者 |
| **前提條件** | 待辦事項存在 |
| **觸發事件** | 使用者點擊「編輯」按鈕 |
| **基本流程** | 1. 使用者點擊待辦事項的「編輯」按鈕<br>2. 系統顯示編輯表單（預填現有資料）<br>3. 使用者修改標題或描述<br>4. 使用者可切換完成狀態<br>5. 使用者點擊「更新」<br>6. 系統更新待辦事項並返回詳情頁 |
| **替代流程** | 若標題為空，顯示驗證錯誤訊息 |
| **後置條件** | 待辦事項被更新 |

### UC-06: 刪除待辦事項 (Delete ToDo)
| 項目 | 內容 |
|------|------|
| **Actor** | 使用者 |
| **前提條件** | 待辦事項存在 |
| **觸發事件** | 使用者點擊「刪除」按鈕 |
| **基本流程** | 1. 使用者點擊待辦事項的「刪除」按鈕<br>2. 系統顯示確認對話框<br>3. 使用者確認刪除<br>4. 系統刪除待辦事項並返回列表頁 |
| **替代流程** | 使用者取消刪除，維持原狀 |
| **後置條件** | 待辦事項被刪除 |

### UC-07: 切換完成狀態 (Toggle Complete)
| 項目 | 內容 |
|------|------|
| **Actor** | 使用者 |
| **前提條件** | 待辦事項存在 |
| **觸發事件** | 使用者點擊完成狀態核取框 |
| **基本流程** | 1. 使用者點擊待辦事項的核取框<br>2. 系統切換該項目的完成狀態<br>3. 頁面即時更新顯示 |
| **替代流程** | 無 |
| **後置條件** | 待辦事項完成狀態被切換 |

---

## 3. 資料模型

### 3.1 ToDo Entity

| 欄位名稱 | 資料類型 | 說明 | 限制條件 |
|----------|----------|------|----------|
| id | BIGINT | 主鍵 | AUTO_INCREMENT |
| title | VARCHAR(255) | 待辦事項標題 | NOT NULL, 最大255字 |
| description | TEXT | 待辦事項描述 | 可為 NULL |
| completed | BOOLEAN | 完成狀態 | 預設 false |
| created_at | DATETIME | 建立時間 | NOT NULL |
| updated_at | DATETIME | 更新時間 | NOT NULL |

---

## 4. 畫面遷移圖

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  ┌─────────────┐                          ┌─────────────┐      │
│  │             │  點擊「新增」             │             │      │
│  │  列表頁面   │ ───────────────────────► │  新增頁面   │      │
│  │  (index)    │                          │  (new)      │      │
│  │             │ ◄─────────────────────── │             │      │
│  └─────────────┘  儲存成功/取消            └─────────────┘      │
│        │                                                        │
│        │ 點擊項目                                               │
│        ▼                                                        │
│  ┌─────────────┐                          ┌─────────────┐      │
│  │             │  點擊「編輯」             │             │      │
│  │  詳情頁面   │ ───────────────────────► │  編輯頁面   │      │
│  │  (show)     │                          │  (edit)     │      │
│  │             │ ◄─────────────────────── │             │      │
│  └─────────────┘  更新成功/取消            └─────────────┘      │
│        │                                                        │
│        │ 點擊「返回」或「刪除」                                  │
│        ▼                                                        │
│  ┌─────────────┐                                               │
│  │  列表頁面   │                                               │
│  └─────────────┘                                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```
